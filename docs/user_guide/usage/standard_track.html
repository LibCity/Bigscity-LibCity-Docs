

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Standard Track &mdash; Bigscity-LibCity  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Parameter Tuning" href="parameter_tuning.html" />
    <link rel="prev" title="Use run_model" href="run_model.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Bigscity-LibCity
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/install.html">Install LibCity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/directory_structure.html">Directory Structure</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../config_settings.html">Config Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data.html">Data Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model.html">Reproduced Model List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluator.html">Evaluator Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../executor.html">Executor Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../usage.html">Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="run_model.html">Use run_model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Standard Track</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#traffic-state-prediction">Traffic State Prediction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#trajectory-location-prediction">Trajectory Location prediction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="parameter_tuning.html">Parameter Tuning</a></li>
<li class="toctree-l2"><a class="reference internal" href="logger.html">Use Logger</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/code_style.html">Code Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_datasets.html">Customize Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_models.html">Customize Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_executors.html">Customize Executors</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/install_quick_start.html">Install and quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/run_model.html">Run an existing model in LibCity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/add_model.html">Add a new model to LibCity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/hyper_tune.html">Tuning the model with automatic tool</a></li>
</ul>
<p class="caption"><span class="caption-text">API REFERENCE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.config.html">libcity.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.data.html">libcity.data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.evaluator.html">libcity.evaluator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.executor.html">libcity.executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.model.html">libcity.model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.pipeline.html">libcity.pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.utils.html">libcity.utils</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Bigscity-LibCity</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../usage.html">Usage</a> &raquo;</li>
        
      <li>Standard Track</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user_guide/usage/standard_track.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="standard-track">
<h1>Standard Track<a class="headerlink" href="#standard-track" title="Permalink to this headline">¶</a></h1>
<p>In the field of traffic big data, there have been long-standing phenomena such as inconsistent evaluation data sets, inconsistent evaluation indicators, and inconsistent preprocessing of data sets, resulting in poor performance comparability of different models. Therefore, in order to solve the above problems, this project has implemented a set of standard pipelines (tracks) for each task.</p>
<p>On the standard track, the original data set, standard data module (Data module), and standard evaluation module (Evaluator module) provided by the project are used to constrain different models to use the same data input and evaluation indicators to improve the comparability of evaluation results.</p>
<p>The standard data input format and evaluation input format for different tasks are explained below :</p>
<div class="section" id="traffic-state-prediction">
<h2>Traffic State Prediction<a class="headerlink" href="#traffic-state-prediction" title="Permalink to this headline">¶</a></h2>
<p>According to the different spatial structure of traffic data, traffic state data can generally be represented by tensors in the following formats:</p>
<ul class="simple">
<li><p>A three-dimensional tensor shaped like <code class="docutils literal notranslate"><span class="pre">(N,T,F)</span></code>, <code class="docutils literal notranslate"><span class="pre">T</span></code> is the length of time, <code class="docutils literal notranslate"><span class="pre">F</span></code> is the feature dimension, and <code class="docutils literal notranslate"><span class="pre">N</span></code> is the number of sensors.</p></li>
<li><p>A four-dimensional tensor shaped like <code class="docutils literal notranslate"><span class="pre">(T,F,I,J)</span></code>, <code class="docutils literal notranslate"><span class="pre">T</span></code> is the length of time, <code class="docutils literal notranslate"><span class="pre">F</span></code> is the feature dimension, and <code class="docutils literal notranslate"><span class="pre">I,J</span></code> represents the row and column index of the grid data.</p></li>
<li><p>A four-dimensional tensor shaped like <code class="docutils literal notranslate"><span class="pre">(T,F,S,T)</span></code>, <code class="docutils literal notranslate"><span class="pre">T</span></code> is the length of time, <code class="docutils literal notranslate"><span class="pre">F</span></code> is the feature dimension, and <code class="docutils literal notranslate"><span class="pre">S,T</span></code> represents the id of the origin and destination of the <code class="docutils literal notranslate"><span class="pre">od</span></code> data.</p></li>
<li><p>A six-dimensional tensor shaped like <code class="docutils literal notranslate"><span class="pre">(T,F,SI,SJ,TI,TJ)</span></code>, <code class="docutils literal notranslate"><span class="pre">T</span></code> is the length of time, <code class="docutils literal notranslate"><span class="pre">F</span></code> is the feature dimension, <code class="docutils literal notranslate"><span class="pre">SI,SJ,TI,TJ</span></code> represents the row and column index of the origin and destination of the <code class="docutils literal notranslate"><span class="pre">grid-od</span></code> data.</p></li>
</ul>
<p>The standard data input format is a dictionary-like <a class="reference internal" href="../data/batch.html"><span class="doc">Batch</span></a> object instance. The key names of this object are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">X</span></code>:  The multi-dimensional tensor input by the model, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">T_in,</span> <span class="pre">space_dim,</span> <span class="pre">feature_dim)</span></code>, each dimension represents the total number of samples in the batch, the width of the input time window, the spatial dimension, and the data feature dimension. In particular, the spatial dimension can be <code class="docutils literal notranslate"><span class="pre">N</span></code> or <code class="docutils literal notranslate"><span class="pre">I,</span> <span class="pre">J</span></code> or <code class="docutils literal notranslate"><span class="pre">S,</span> <span class="pre">T</span></code> or <code class="docutils literal notranslate"><span class="pre">SI,</span> <span class="pre">SJ,</span> <span class="pre">TI,</span> <span class="pre">TJ</span></code> as mentioned above.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y</span></code>:  The multi-dimensional tensor that the model expects to output, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">T_out,</span> <span class="pre">space_dim,</span> <span class="pre">feature_dim)</span></code>, each dimension represents the total number of samples in the batch, the width of the output time window, the spatial dimension, and the data feature dimension. Among them, the spatial dimension can be <code class="docutils literal notranslate"><span class="pre">N</span></code> or <code class="docutils literal notranslate"><span class="pre">I,</span> <span class="pre">J</span></code> or <code class="docutils literal notranslate"><span class="pre">S,</span> <span class="pre">T</span></code> or <code class="docutils literal notranslate"><span class="pre">SI,</span> <span class="pre">SJ,</span> <span class="pre">TI,</span> <span class="pre">TJ</span></code> as mentioned above.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">X_ext</span></code>: Optional external data, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">T_in,</span> <span class="pre">ext_dim)</span></code>, each dimension represents the total number of samples in the batch, the width of the input time window, and the feature dimension of the external data. <strong>In particular, some models may directly incorporate <code class="docutils literal notranslate"><span class="pre">X_ext</span></code> into <code class="docutils literal notranslate"><span class="pre">X</span></code> as the input of the model.</strong></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y_ext</span></code>: Optional external data, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">T_out,</span> <span class="pre">ext_dim)</span></code>, each dimension represents the total number of samples in the batch, the width of the output time window, and the feature dimension of the external data.</p></li>
</ul>
<p>The standard evaluation input format is a dictionary object, and the dictionary has the following key names:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">y_true</span></code>:  The ground-truth value, the format is the same as the <code class="docutils literal notranslate"><span class="pre">y</span></code> in the input.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">y_pred</span></code>:  The prediction value, the format is the same as the <code class="docutils literal notranslate"><span class="pre">y</span></code> in the input.</p></li>
</ul>
</div>
<div class="section" id="trajectory-location-prediction">
<h2>Trajectory Location prediction<a class="headerlink" href="#trajectory-location-prediction" title="Permalink to this headline">¶</a></h2>
<p>The standard data input format is a dictionary-like <a class="reference internal" href="../data/batch.html"><span class="doc">Batch</span></a> object instance. The key names of this object are as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">history_loc</span></code>: Historical trajectory location information, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">history_len)</span></code>, <code class="docutils literal notranslate"><span class="pre">history_len</span></code> is the length of the historical trajectory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">history_tim</span></code>: Historical trajectory time information, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">history_len)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">current_loc</span></code>: Current trajectory location information, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">current_len)</span></code>,  <code class="docutils literal notranslate"><span class="pre">current_len</span></code> is the length of the current trajectory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">current_tim</span></code>: Current trajectory time information, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">current_len)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">uid</span></code>: The id of the user for each trajectory, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">target</span></code>: Expected next hop location, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size)</span> </code>.</p></li>
</ul>
<p>The standard evaluation input format is a dictionary object, and the dictionary has the following key names:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">uid</span></code>: The id of the user for each trajectory,  <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loc_true</span></code>:  Expected next hop location,  <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size)</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">loc_pred</span></code>:  Model prediction output, <code class="docutils literal notranslate"><span class="pre">shape</span> <span class="pre">=</span> <span class="pre">(batch_size,</span> <span class="pre">output_dim)</span></code>.</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="parameter_tuning.html" class="btn btn-neutral float-right" title="Parameter Tuning" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="run_model.html" class="btn btn-neutral float-left" title="Use run_model" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, aptx1231

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>