

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Atomic Files &mdash; Bigscity-LibCity  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Batch" href="batch.html" />
    <link rel="prev" title="Raw Data" href="raw_data.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Bigscity-LibCity
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/install.html">Install LibCity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/directory_structure.html">Directory Structure</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../config_settings.html">Config Settings</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../data.html">Data Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data_flow.html">Data Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="raw_data.html">Raw Data</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Atomic Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#geo-table">Geo Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usr-table">Usr Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rel-table">Rel Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dyna-table">Dyna Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ext-table">Ext Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-type-definition">Data Type Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#config-file">Config File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="batch.html">Batch</a></li>
<li class="toctree-l2"><a class="reference internal" href="args_for_data.html">Args for Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataset_for_task.html">Dataset For Task</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../model.html">Reproduced Model List</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluator.html">Evaluator Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../executor.html">Executor Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/code_style.html">Code Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_datasets.html">Customize Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_models.html">Customize Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_executors.html">Customize Executors</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/install_quick_start.html">Install and quick start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/run_model.html">Run an existing model in LibCity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/add_model.html">Add a new model to LibCity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/hyper_tune.html">Tuning the model with automatic tool</a></li>
</ul>
<p class="caption"><span class="caption-text">API REFERENCE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.config.html">libcity.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.data.html">libcity.data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.evaluator.html">libcity.evaluator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.executor.html">libcity.executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.model.html">libcity.model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.pipeline.html">libcity.pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../libcity/libcity.utils.html">libcity.utils</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Bigscity-LibCity</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../data.html">Data Introduction</a> &raquo;</li>
        
      <li>Atomic Files</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user_guide/data/atomic_files.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="atomic-files">
<h1>Atomic Files<a class="headerlink" href="#atomic-files" title="Permalink to this headline">Â¶</a></h1>
<p>The following types of atomic files are defined:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>filename</th>
<th>content</th>
<th>example</th>
</tr>
</thead>
<tbody>
<tr>
<td>xxx.geo</td>
<td>Store geographic entity attribute information.</td>
<td>geo_id, type, coordinates</td>
</tr>
<tr>
<td>xxx.usr</td>
<td>Store traffic user information.</td>
<td>usr_id, gender, birth_date</td>
</tr>
<tr>
<td>xxx.rel</td>
<td>Store the relationship information between entities, such as road networks.</td>
<td>rel_id, type, origin_id, destination_id</td>
</tr>
<tr>
<td>xxx.dyna</td>
<td>Store traffic condition information.</td>
<td>dyna_id, type, time, entity_id, location_id</td>
</tr>
<tr>
<td>xxx.ext</td>
<td>Store external information, such as weather, temperature, etc.</td>
<td>ext_id, time, properties</td>
</tr>
<tr>
<td>config.json</td>
<td>Used to supplement the description of the above table information.</td>
<td></td>
</tr>
</tbody>
</table><p>Note: For different traffic prediction tasks, different atomic files may be used, and a dataset may not contain all six kinds of atomic files.</p>
<p><strong>The format of <code class="docutils literal notranslate"><span class="pre">.geo</span></code>, <code class="docutils literal notranslate"><span class="pre">.rel</span></code>, <code class="docutils literal notranslate"><span class="pre">.dyna</span></code>, and <code class="docutils literal notranslate"><span class="pre">.ext</span></code> is similar to the <code class="docutils literal notranslate"><span class="pre">csv</span></code> file, which consists of multiple columns of data.</strong></p>
<div class="section" id="geo-table">
<h2>Geo Table<a class="headerlink" href="#geo-table" title="Permalink to this headline">Â¶</a></h2>
<p>An element in the Geo table consists of the following four parts:</p>
<p><strong>geo_id, type, coordinates, properties (multiple columns)</strong>.</p>
<ul class="simple">
<li><p>geo_id: The primary key uniquely determines a geo entity. (E.g. Number of sensors, latitude and longitude points, road sections, areas, etc.)</p></li>
<li><p>type: The type of geo. Range in [<code class="docutils literal notranslate"><span class="pre">Point</span></code>, <code class="docutils literal notranslate"><span class="pre">LineString</span></code>, <code class="docutils literal notranslate"><span class="pre">Polygon</span></code>]. These three values are consistent with the points, lines and planes in <a class="reference external" href="https://tools.ietf.org/html/rfc7946#section-1">Geojson</a>.</p></li>
<li><p>coordinates: Array or nested array composed of float type. Describe the location information of the geo entity, using the coordinates format of <a class="reference external" href="https://tools.ietf.org/html/rfc7946#section-1">Geojson</a>.</p></li>
<li><p>properties: Describe the attribute information of the geo entity. If there are multiple attributes, you can use different column names to define multiple columns of data, such as <code class="docutils literal notranslate"><span class="pre">POI_name</span></code>, <code class="docutils literal notranslate"><span class="pre">POI_type</span></code>. [<strong>For grid data, there must be two columns <code class="docutils literal notranslate"><span class="pre">row_id</span></code> and <code class="docutils literal notranslate"><span class="pre">column_id</span></code> which represent the row and column numbers of the grid.</strong> ]</p></li>
</ul>
<blockquote>
<div><p>Note: Geojsonâs coordinates format: (<strong>Longitude first, latitude second</strong>)</p>
<ul class="simple">
<li><p>Point: [102.0, 0.5]</p></li>
<li><p>LineString: [ [102.0, 0.0], [103.0, 1.0], [104.0, 0.0], [105.0, 1.0] ]</p></li>
<li><p>Polygon:  [[ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ]]</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="usr-table">
<h2>Usr Table<a class="headerlink" href="#usr-table" title="Permalink to this headline">Â¶</a></h2>
<p>An element in the Usr table consists of the following two parts:</p>
<p><strong>usr_id, properties (multiple columns)</strong>.</p>
<ul class="simple">
<li><p>usr_id: The primary key uniquely determines a usr entity.</p></li>
<li><p>properties: Describe the attribute information of the usr entity. If there are multiple attributes, different column names can be used to define multiple columns of data, such as <code class="docutils literal notranslate"><span class="pre">gender</span></code>, <code class="docutils literal notranslate"><span class="pre">birth_date</span></code>.</p></li>
</ul>
</div>
<div class="section" id="rel-table">
<h2>Rel Table<a class="headerlink" href="#rel-table" title="Permalink to this headline">Â¶</a></h2>
<p>An element in the Rel table consists of the following four parts:</p>
<p><strong>rel_id, type, origin_id, destination_id, properties (multiple columns)</strong>.</p>
<ul class="simple">
<li><p>rel_id: The primary key uniquely determines the relationship between entities.</p></li>
<li><p>type: The type of rel. Range in [<code class="docutils literal notranslate"><span class="pre">usr</span></code>, <code class="docutils literal notranslate"><span class="pre">geo</span></code>], which indicates whether the relationship is based on <code class="docutils literal notranslate"><span class="pre">geo</span></code> or <code class="docutils literal notranslate"><span class="pre">usr</span></code>.</p></li>
<li><p>origin_id: The ID of the origin of the relationship, which is either in the Geo table or in the Usr table.</p></li>
<li><p>destination_id: The ID of the destination of the relationship, which is one of the Geo table or the Usr table.</p></li>
<li><p>properties: Describe the attribute information of the relationship. If there are multiple attributes, different column names can be used to define multiple columns of data.</p></li>
</ul>
</div>
<div class="section" id="dyna-table">
<h2>Dyna Table<a class="headerlink" href="#dyna-table" title="Permalink to this headline">Â¶</a></h2>
<p>An element in the Dyna table consists of the following five parts:</p>
<p><strong>dyna_id, type, time, entity_id(multiple columns), properties(multiple columns)</strong>.</p>
<ul>
<li><p>dyna_id: The primary key uniquely determines a record in the Dyna table.</p></li>
<li><p>type: The type of dyna. There are two values: <code class="docutils literal notranslate"><span class="pre">trajectory</span></code> (for trajectory next-location prediction task) and <code class="docutils literal notranslate"><span class="pre">state</span></code> (for traffic state prediction task).</p></li>
<li><p>time: Time information, using the date and time combination notation in <a class="reference external" href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO-8601 standard</a>, such as: <code class="docutils literal notranslate"><span class="pre">2020-</span> <span class="pre">12-07T02:59:46Z</span></code>.</p></li>
<li><p>entity_id: Describe which entity the record is based on, which is the ID of <code class="docutils literal notranslate"><span class="pre">geo</span></code> or <code class="docutils literal notranslate"><span class="pre">usr</span></code>.</p>
<ul>
<li><p>For trajectory location prediction tasks:</p>
<p>The format is: dyna_id, trajectory, time, entity_id, location. The content of the <strong>entity_id</strong> column should be <strong>usr_id</strong>.</p>
</li>
<li><p>For traffic state prediction tasks, <strong>entity_id</strong> may have different changes:</p>
<ul class="simple">
<li><p>For entities that can use one-dimensional numbering for sensors, road sections, areas, etc., this column is the corresponding ID, the column name is [<strong>entity_id</strong>], and the file suffix name is <code class="docutils literal notranslate"><span class="pre">.dyna</span></code>.</p></li>
<li><p>For grid-based traffic data, the column name is [<strong>row_id, column_id</strong>], and the file extension is <code class="docutils literal notranslate"><span class="pre">.grid</span></code>.</p></li>
<li><p>For od-based traffic data, the column name is [<strong>origin_id, destination_id</strong>], and the file suffix name is <code class="docutils literal notranslate"><span class="pre">.od</span></code>.</p></li>
<li><p>For grid-od-based traffic data, the column name is [<strong>origin_row_id, origin_column_id, destination_row_id, destination_column_id</strong>], and the file extension is <code class="docutils literal notranslate"><span class="pre">.gridod</span></code>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>properties: Describe the attribute information of the record. If there are multiple attributes, different column names can be used to define multiple columns of data, such as both speed data and flow data.</p></li>
</ul>
</div>
<div class="section" id="ext-table">
<h2>Ext Table<a class="headerlink" href="#ext-table" title="Permalink to this headline">Â¶</a></h2>
<p>An element in the Ext table consists of the following three parts:</p>
<p><strong>ext_id, time, properties (multiple columns)</strong>.</p>
<ul class="simple">
<li><p>ext_id: The primary key uniquely determines a record in the external data table.</p></li>
<li><p>time: Time information, using the date and time combination notation in <a class="reference external" href="https://www.iso.org/iso-8601-date-and-time-format.html">ISO-8601 standard</a>, such as: <code class="docutils literal notranslate"><span class="pre">2020-</span> <span class="pre">12-07T02:59:46Z</span></code>.</p></li>
<li><p>properties: Describe the attribute information of the record. If there are multiple attributes, different column names can be used to define multiple columns of data, such as both temperature data and humidity data.</p></li>
</ul>
</div>
<div class="section" id="data-type-definition">
<h2>Data Type Definition<a class="headerlink" href="#data-type-definition" title="Permalink to this headline">Â¶</a></h2>
<p>The data type definition of each column in the dataset needs to be given in the config file, which is helpful for subsequent data processing.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>geo_id</td>
<td>Discrete limited IDs that exist in the Geo table.</td>
</tr>
<tr>
<td>usr_id</td>
<td>Discrete limited IDs that exist in the Usr table.</td>
</tr>
<tr>
<td>rel_id</td>
<td>Discrete limited IDs that exist in the Rel table.</td>
</tr>
<tr>
<td>time</td>
<td>Time string conforming to ISO-8601 standard.</td>
</tr>
<tr>
<td>coordinate</td>
<td>String conforming to the coordinate representation in geojosn format.</td>
</tr>
<tr>
<td>num</td>
<td>Real number.</td>
</tr>
<tr>
<td>enum</td>
<td>Enum string.</td>
</tr>
<tr>
<td>other</td>
<td>The rest are stored in string type.</td>
</tr>
</tbody>
</table></div>
<div class="section" id="config-file">
<h2>Config File<a class="headerlink" href="#config-file" title="Permalink to this headline">Â¶</a></h2>
<p>The config file is used to supplement the information describing the above five tables themselves. It is stored in <code class="docutils literal notranslate"><span class="pre">json</span></code> format and consists of six keys: <code class="docutils literal notranslate"><span class="pre">geo</span></code>, <code class="docutils literal notranslate"><span class="pre">usr</span></code>, <code class="docutils literal notranslate"><span class="pre">rel</span></code>, <code class="docutils literal notranslate"><span class="pre">dyna</span></code>, <code class="docutils literal notranslate"><span class="pre">ext</span></code>, and <code class="docutils literal notranslate"><span class="pre">info</span></code>.</p>
<ul>
<li><p>For <code class="docutils literal notranslate"><span class="pre">geo</span></code>, <code class="docutils literal notranslate"><span class="pre">rel</span></code>, <code class="docutils literal notranslate"><span class="pre">dyna</span></code>, <code class="docutils literal notranslate"><span class="pre">ext</span></code>:</p>
<p>Contains a key of <code class="docutils literal notranslate"><span class="pre">including_types</span></code>, and uses an array to describe the <code class="docutils literal notranslate"><span class="pre">type</span></code> values in the table. After that, each <code class="docutils literal notranslate"><span class="pre">type</span></code> is used as a key, describing which keys  are contained in the <code class="docutils literal notranslate"><span class="pre">properties</span></code> table and their data types under the <code class="docutils literal notranslate"><span class="pre">type</span></code>.</p>
</li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">usr</span></code>:</p>
<p>Contains a <code class="docutils literal notranslate"><span class="pre">properties</span></code> key, describing which keys are contained in the <code class="docutils literal notranslate"><span class="pre">properties</span></code> table and their data types.</p>
</li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">info</span></code>:</p>
<p><strong>Contains other necessary statistical information of the dataset</strong>, for different traffic prediction tasks, contains different content.</p>
<ul class="simple">
<li><p><strong>For traffic state prediction task:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">geo_file</span></code>: The file name of the <code class="docutils literal notranslate"><span class="pre">.geo</span></code> file, <strong>string type</strong>, the default is the dataset name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rel_file</span></code>: The file name of the <code class="docutils literal notranslate"><span class="pre">.rel</span></code> file, <strong>string type</strong>, the default is the dataset name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_files</span></code>: The file name of the data file (such as <code class="docutils literal notranslate"><span class="pre">.dyna</span></code>, <code class="docutils literal notranslate"><span class="pre">.grid</span></code>, <code class="docutils literal notranslate"><span class="pre">.gridod</span></code>), <strong>array or string type</strong>, the default is the dataset name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ext_file</span></code>: The file name of the <code class="docutils literal notranslate"><span class="pre">.ext</span></code> file, <strong>string type</strong>, the default is the dataset name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weight_col</span></code>: The column name loaded from the <code class="docutils literal notranslate"><span class="pre">.rel</span></code> file, <strong>string array with only one element or a string type</strong>. When not specified, if the <code class="docutils literal notranslate"><span class="pre">.rel</span></code> file has only one column of weight columns, there is no problem, otherwise an error will be reported.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">data_col</span></code>: The column names loaded from the data files(such as <code class="docutils literal notranslate"><span class="pre">.dyna</span></code>, <code class="docutils literal notranslate"><span class="pre">.grid</span></code>, <code class="docutils literal notranslate"><span class="pre">.gridod</span></code>), <strong>array or string type</strong>, load all columns if not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ext_col</span></code>: The column names loaded from the external file, <strong>array or string type</strong>, load all columns if not specified.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_dim</span></code>: Specify the dimensions of the model output, <strong>generally should be the same as the number of attribute columns specified in <code class="docutils literal notranslate"><span class="pre">data_col</span></code></strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">time_intervals</span></code>: The length of the data set time slice, <strong>in seconds</strong>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">init_weight_inf_or_zero</span></code>: Range in [<code class="docutils literal notranslate"><span class="pre">inf</span></code> , <code class="docutils literal notranslate"><span class="pre">zero</span></code>]. When loading the <code class="docutils literal notranslate"><span class="pre">.rel</span></code> file to construct the adjacency matrix, the initial adjacency matrix is all INF (<code class="docutils literal notranslate"><span class="pre">inf</span></code>) or all 0 (<code class="docutils literal notranslate"><span class="pre">zero</span></code>), and the default is <code class="docutils literal notranslate"><span class="pre">inf</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">set_weight_link_or_dist</span></code>: Range in [<code class="docutils literal notranslate"><span class="pre">link</span></code>, <code class="docutils literal notranslate"><span class="pre">dist</span></code>], when loading the <code class="docutils literal notranslate"><span class="pre">.rel</span></code> file to construct the adjacency matrix, use the original value in the weight column in the file (<code class="docutils literal notranslate"><span class="pre">dist</span></code>) or revise it to a matrix of all 01 (<code class="docutils literal notranslate"><span class="pre">link</span></code>), and the default is <code class="docutils literal notranslate"><span class="pre">dist</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">calculate_weight_adj</span></code>: Whether the weight of the adjacency matrix obtained from the <code class="docutils literal notranslate"><span class="pre">.rel</span></code> file needs to be further calculated, <strong>default to <code class="docutils literal notranslate"><span class="pre">False</span></code></strong>. Some adjacency matrices are calculated based on the original data. The current calculation method is Gaussian kernel method with threshold: $$w_{ij} = \exp \left(- \frac{d_{ij}^{2}}{\sigma^{2}}\right)$$.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weight_adj_epsilon</span></code>: The threshold of the Gaussian kernel. If the calculated weight is less than the threshold, it becomes 0, that is, $$ w_{ij}[w_{ij}&lt;\epsilon]=0â$$. This parameter depends on the parameter <code class="docutils literal notranslate"><span class="pre">calculate_weight_adj=True</span></code> .</p></li>
</ul>
</li>
<li><p><strong>For trajectory next-location prediction task:</strong></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">distance_upper</span></code>: The maximum distance between POI points.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Example:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;geo&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;including_types&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;Point&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;Point&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;poi_name&quot;</span><span class="p">:</span><span class="s2">&quot;other&quot;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;usr&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;properties&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;user_type&quot;</span><span class="p">:</span><span class="s2">&quot;enum&quot;</span><span class="p">,</span>
            <span class="nt">&quot;birth_year&quot;</span><span class="p">:</span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
            <span class="nt">&quot;gender&quot;</span><span class="p">:</span><span class="s2">&quot;enum&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;rel&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;including_types&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;geo&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;geo&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;link_weight&quot;</span><span class="p">:</span><span class="s2">&quot;num&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;dyna&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;including_types&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;state&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;state&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;entity_id&quot;</span><span class="p">:</span><span class="s2">&quot;geo_id&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traffic_speed&quot;</span><span class="p">:</span><span class="s2">&quot;num&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;grid&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;including_types&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;state&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;state&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;row_id&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
            <span class="nt">&quot;column_id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="nt">&quot;traffic_speed&quot;</span><span class="p">:</span><span class="s2">&quot;num&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;od&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;including_types&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;state&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;state&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;origin_id&quot;</span><span class="p">:</span><span class="s2">&quot;geo_id&quot;</span><span class="p">,</span>
            <span class="nt">&quot;destination_id&quot;</span><span class="p">:</span><span class="s2">&quot;geo_id&quot;</span><span class="p">,</span>
            <span class="nt">&quot;traffic_speed&quot;</span><span class="p">:</span><span class="s2">&quot;num&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;gridod&quot;</span><span class="p">:{</span>
        <span class="nt">&quot;including_types&quot;</span><span class="p">:[</span>
            <span class="s2">&quot;state&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;state&quot;</span><span class="p">:{</span>
            <span class="nt">&quot;origin_row_id&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
            <span class="nt">&quot;origin_column_id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="nt">&quot;destination_row_id&quot;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
            <span class="nt">&quot;destination_column_id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="nt">&quot;traffic_speed&quot;</span><span class="p">:</span><span class="s2">&quot;num&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;info&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;data_col&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;inflow&quot;</span><span class="p">,</span>
          <span class="s2">&quot;outflow&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;ext_col&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;Temperature&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;data_files&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;TAXIBJ2013&quot;</span>
        <span class="p">],</span>
        <span class="nt">&quot;geo_file&quot;</span><span class="p">:</span> <span class="s2">&quot;TAXIBJ&quot;</span><span class="p">,</span>
        <span class="nt">&quot;ext_file&quot;</span><span class="p">:</span> <span class="s2">&quot;TAXIBJ&quot;</span><span class="p">,</span>
        <span class="nt">&quot;output_dim&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nt">&quot;output_dim&quot;</span><span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
        <span class="nt">&quot;init_weight_inf_or_zero&quot;</span><span class="p">:</span> <span class="s2">&quot;inf&quot;</span><span class="p">,</span>
        <span class="nt">&quot;set_weight_link_or_dist&quot;</span><span class="p">:</span> <span class="s2">&quot;dist&quot;</span><span class="p">,</span>
        <span class="nt">&quot;calculate_weight_adj&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;weight_adj_epsilon&quot;</span><span class="p">:</span> <span class="mf">0.1</span>
  	<span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="batch.html" class="btn btn-neutral float-right" title="Batch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="raw_data.html" class="btn btn-neutral float-left" title="Raw Data" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, aptx1231

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>