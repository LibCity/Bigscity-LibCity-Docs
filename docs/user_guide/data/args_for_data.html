

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Args for Data &mdash; Bigscity-TrafficDL  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Model Introduction" href="../model.html" />
    <link rel="prev" title="Batch" href="batch.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Bigscity-TrafficDL
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/quick_start.html">Quick Start</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/directory_structure.html">Directory Structure</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../config_settings.html">Config Settings</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../data.html">Data Introduction</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="data_flow.html">Data Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="raw_data.html">Raw Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="atomic_files.html">Atomic Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html">Batch</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Args for Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#traffic-state-prediction-dataset">Traffic State Prediction DataSet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#trajectory-location-prediction-dataset">Trajectory Location Prediction DataSet</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../model.html">Model Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../evaluator.html">Evaluator Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../executor.html">Executor Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/code_style.html">Code Style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_datasets.html">Customize Dataset</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_models.html">Customize Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_executors.html">Customize Executors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_guide/implemented_logger.html">Logger</a></li>
</ul>
<p class="caption"><span class="caption-text">API REFERENCE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../trafficdl/trafficdl.config.html">trafficdl.config</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trafficdl/trafficdl.data.html">trafficdl.data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trafficdl/trafficdl.evaluator.html">trafficdl.evaluator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trafficdl/trafficdl.executor.html">trafficdl.executor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trafficdl/trafficdl.model.html">trafficdl.model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trafficdl/trafficdl.pipeline.html">trafficdl.pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trafficdl/trafficdl.utils.html">trafficdl.utils</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Bigscity-TrafficDL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../data.html">Data Introduction</a> &raquo;</li>
        
      <li>Args for Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/user_guide/data/args_for_data.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="args-for-data">
<h1>Args for Data<a class="headerlink" href="#args-for-data" title="Permalink to this headline">¶</a></h1>
<p>The following describes the relevant parameters involved in the dataset.</p>
<div class="section" id="traffic-state-prediction-dataset">
<h2>Traffic State Prediction DataSet<a class="headerlink" href="#traffic-state-prediction-dataset" title="Permalink to this headline">¶</a></h2>
<p>The following parameters are all parameters used in the task of traffic state prediction:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">batch_size</span></code>: The training and evaluation batch size. Defaults to <code class="docutils literal notranslate"><span class="pre">64</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cache_dataset</span></code>:  Whether to save the processed dataset. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_workers</span></code>:  Parameter of <a class="reference external" href="https://pytorch.org/docs/stable/data.html?highlight=dataloader#torch.utils.data.DataLoader">Dataloader</a>. Defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pad_with_last_sample</span></code>:  When the total number of samples cannot be divided by <code class="docutils literal notranslate"><span class="pre">batch_size</span></code>, whether to fill the last batch with the last element. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">train_rate</span></code>: The proportion of the training set to the total dataset.  Defaults to <code class="docutils literal notranslate"><span class="pre">0.7</span></code>. (The order of division is training set, validation set, test set)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval_rate</span></code>: The proportion of the validation set. Defaults to <code class="docutils literal notranslate"><span class="pre">0.1</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input_window</span></code>: The length of the previous time steps used for prediction. Traffic prediction generally uses data from multiple time steps in the past to predict future data. Defaults to <code class="docutils literal notranslate"><span class="pre">12</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_window</span></code>: The length of the predicted time steps in the future.  Specifically, use the data at <code class="docutils literal notranslate"><span class="pre">input_window</span></code> to predict the data at <code class="docutils literal notranslate"><span class="pre">output_window</span></code>. Defaults to <code class="docutils literal notranslate"><span class="pre">12</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">load_external</span></code>: Whether to load external data (such as weather data). Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">normal_external</span></code>: Whether to normalize external data. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_time_in_day</span></code>: Time parameter, add auxiliary information of time of day. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>. This parameter depends on the parameter <code class="docutils literal notranslate"><span class="pre">load_external=True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">add_day_in_week</span></code>: Time parameter, add auxiliary information of day of week. Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>. This parameter depends on the parameter <code class="docutils literal notranslate"><span class="pre">load_external=True</span></code>.</p></li>
</ul>
</li>
<li><p>Some parameters obtained from the <code class="docutils literal notranslate"><span class="pre">get_feature()</span></code> function of the <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> class:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">scaler</span></code>: Specify the normalization method, <strong>need to be specified externally</strong>. Range in [<code class="docutils literal notranslate"><span class="pre">normal</span></code>, <code class="docutils literal notranslate"><span class="pre">standard</span></code>, <code class="docutils literal notranslate"><span class="pre">minmax01</span></code>, <code class="docutils literal notranslate"><span class="pre">minmax11</span></code>, <code class="docutils literal notranslate"><span class="pre">none</span></code>]. Defaults to <code class="docutils literal notranslate"><span class="pre">none</span></code>.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">normal</span></code>: Divide by the maximum value for normalization.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">standard</span></code>: Z-score normalization.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minmax01</span></code>: MinMax normalization, result interval [0, 1].</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">minmax11</span></code>: MinMax normalization, result interval [-1, 1].</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">none</span></code>: Not normalized.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">feature_dim*</span></code>: The size of the feature dimension of traffic data, which <strong>cannot be specified externally</strong>, but it is automatically calculated according to different datasets. External data and some other parameters may also affect the size of this dimension.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">adj_mx*</span></code>: The adjacency matrix constructed by the traffic data, which <strong>cannot be specified externally</strong>, but it is calculated from the <code class="docutils literal notranslate"><span class="pre">.rel</span></code> file. For the parameter settings related to <code class="docutils literal notranslate"><span class="pre">.rel</span></code> files, please refer to the <a class="reference internal" href="atomic_files.html"><span class="doc">atomic files</span></a> section.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">num_nodes*</span></code>: The number of traffic data entities, such as the number of sensors and the number of grids, which <strong>cannot be specified externally</strong>, but it is automatically calculated according to different datasets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len_row*</span></code>: Number of grid rows of grid data, which <strong>cannot be specified externally</strong>, but it is automatically calculated according to different datasets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len_column*</span></code>: Number of grid columns of grid data, which <strong>cannot be specified externally</strong>, but it is automatically calculated according to different datasets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output_dim*</span></code>: The size of the feature dimension of the output result of the traffic prediction model <strong>needs to be specified externally</strong>. It is generally not equal to <code class="docutils literal notranslate"><span class="pre">feature_dim</span></code>, because the input data may contain external features, but the output result of the model generally only contains valid traffic information, not external information. This parameter is specified by the config file in the data set atomic file, please refer to the <a class="reference internal" href="atomic_files.html"><span class="doc">atomic file</span></a> section.</p></li>
</ul>
</li>
<li><p>Other uncommon parameters</p>
<p>Note: Some traffic prediction models implement traffic prediction by modeling closeness/period/trend, and use <code class="docutils literal notranslate"><span class="pre">len_closeness</span></code>/<code class="docutils literal notranslate"><span class="pre">len_period</span></code>/<code class="docutils literal notranslate"><span class="pre">len_trend</span></code> data as historical data for prediction instead of the above parameters <code class="docutils literal notranslate"><span class="pre">input_window</span></code> and <code class="docutils literal notranslate"><span class="pre">output_window</span></code>, so the following parameters are added:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">points_per_hour</span></code>: How many time steps are there in an hour, for example, if the dataset has a time step of 5 min, it is 12.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len_closeness</span></code>: The length of the closeness time slice sequence.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len_period</span></code>: The length of the period time slice sequence.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len_trend</span></code>: The length of the trend time slice sequence.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pad_forward_period</span></code>: The number of time slices that the time slice corresponding to period extends forward.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pad_back_period</span></code>: The number of time slices that the time slice corresponding to period extends backwards.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pad_forward_trend</span></code>: The number of time slices that the time slice corresponding to trend extends forward.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pad_back_trend</span></code>: The number of time slices that the time slice corresponding to trend extends backwards.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interval_period</span></code>: The length of the period time interval, generally 1, which means an interval of one day.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">interval_trend</span></code>: The length of the trend time interval, generally 7, which means an interval of one week.</p></li>
</ul>
<p>Note: The <code class="docutils literal notranslate"><span class="pre">len_closeness</span></code>/<code class="docutils literal notranslate"><span class="pre">len_period</span></code>/<code class="docutils literal notranslate"><span class="pre">len_trend</span></code> obtained from the <code class="docutils literal notranslate"><span class="pre">get_feature()</span></code> function of the <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> class represents <strong>the actual length of these three pieces of data</strong>. The three pieces of data are concatenated together in the returned value <code class="docutils literal notranslate"><span class="pre">batch['X']</span></code>, each data can be obtained according to the length.</p>
</li>
</ul>
</div>
<div class="section" id="trajectory-location-prediction-dataset">
<h2>Trajectory Location Prediction DataSet<a class="headerlink" href="#trajectory-location-prediction-dataset" title="Permalink to this headline">¶</a></h2>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../model.html" class="btn btn-neutral float-right" title="Model Introduction" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="batch.html" class="btn btn-neutral float-left" title="Batch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, aptx1231

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>